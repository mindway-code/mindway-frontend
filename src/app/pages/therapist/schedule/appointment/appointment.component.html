
<div class="mb-3 d-flex gap-3 align-items-center">
  <label class="form-label m-0">Pesquisar paciente:</label>
  <input type="text" class=" input-search" [(ngModel)]="searchTerm" (input)="filterPacientes()" placeholder="Digite nome ou email...">
</div>

<table class="table table-hover table-bordered bg-white rounded shadow-sm">
  <thead class="bg-light">
    <tr>
      <th>Nome</th>
      <th>Email</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let paciente of pacientesFiltrados">
      <td>{{ paciente.name }} {{ paciente.surname }}</td>
      <td>{{ paciente.email }}</td>
      <td>
        <button class="btn btn-sm btn-calendar"
          (click)="abrirAgendamento(paciente.id)">
          Agendar
          <!-- <i class="bi bi-calendar-date-fill "></i> -->
        </button>
        <!-- Outras ações, se quiser -->
      </td>
    </tr>
    <tr *ngIf="pacientesFiltrados.length === 0">
      <td colspan="4" class="text-center text-muted">Nenhum paciente encontrado.</td>
    </tr>
  </tbody>
</table>

<!-- Paginação -->
<nav *ngIf="totalPages > 1" aria-label="Paginação de pacientes">
  <ul class="pagination justify-content-center">
    <li class="page-item" [class.disabled]="currentPage === 1">
      <button class="btn btn-group  btn-outline-success border-0  " (click)="mudarPagina(currentPage - 1)">Anterior</button>
    </li>
    <li class="page-item text-black" *ngFor="let page of paginas" [class.active]="currentPage === page">
      <button class="btn btn-group page-link  " (click)="mudarPagina(page)">{{ page }}</button>
    </li>
    <li class="page-item" [class.disabled]="currentPage === totalPages">
      <button class="btn btn-group  btn-outline-success border-0  " (click)="mudarPagina(currentPage + 1)">Próxima</button>
    </li>
  </ul>
</nav>

<!-- Modal de Agendamento -->
<div class="modal fade mt-3" id="agendamentoModal" tabindex="-1" aria-labelledby="agendamentoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form [formGroup]="formAgendamento" (ngSubmit)="salvarAgendamento()">
        <div class="modal-header">
          <h5 class="modal-title" id="agendamentoModalLabel">Agendar Consulta</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label>Paciente:</label>
            <input class="form-control" [value]="pacienteSelecionado?.name + ' ' + pacienteSelecionado?.surname" disabled>
          </div>
          <div class="mb-3">
            <label>Data</label>
            <input type="date" class="form-control" formControlName="data" required>
          </div>
          <div class="mb-3">
            <label>Hora</label>
            <select class="form-select" formControlName="hora" placeholder="a" required>
              <option value="" disabled selected>Selecione o horário</option>
              <option *ngFor="let h of horarios" [value]="h">{{ h }}</option>
            </select>
          </div>
          <!-- outros campos do agendamento -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="submit" class="btn btn-success" [disabled]="formAgendamento.invalid">Agendar</button>
        </div>
      </form>
    </div>
  </div>
</div>
